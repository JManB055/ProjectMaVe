@page "{id:int}"
@model ProjectMaVe.Pages.Workouts.DetailsModel
@{
    ViewData["Title"] = "Workout Details";
}

<div class="workouts-page">
    <!-- Header -->
    <header class="workouts-header mb-4 py-4 bg-light-orange border-bottom">
        <input type="hidden" id="workout-id" value="@Model.RouteData.Values["id"]" />
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1 class="urbanist-bold text-blue mb-2">Workout Details</h1>
                    <p class="urbanist-medium text-black mb-0" id="workoutDateDisplay">
                        Loading...
                    </p>
                </div>
                <div class="col-md-4 text-md-end mt-3 mt-md-0">
                    <a href="/Workouts" class="btn btn-outline-secondary me-2">
                        <i class="fas fa-arrow-left me-2"></i>Back
                    </a>
                    <button class="btn btn-outline-danger" id="deleteWorkoutBtn">
                        <i class="fas fa-trash me-2"></i>Delete
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main class="workouts-main container mb-5">
        <form id="antiForgeryForm" style="display:none;">
            @Html.AntiForgeryToken()
        </form>
        <!-- Workout Info Card -->
        <section class="workout-info-section mb-4">
            <div class="card shadow-sm border-0 rounded-4">
                <div class="card-header bg-blue text-light-orange urbanist-bold">
                    <i class="fas fa-info-circle me-2"></i>Workout Information
                </div>
                <div class="card-body bg-light-orange">
                    <div class="row align-items-center">
                        <div class="col-md-4">
                            <label class="form-label urbanist-medium text-blue small mb-1">Workout Date</label>
                            <input type="date" class="form-control rounded-3" id="editWorkoutDate" />
                        </div>
                        <div class="col-md-4">
                            <label class="form-label urbanist-medium text-blue small mb-1 d-block">Workout Type</label>
                            <span class="badge bg-primary urbanist-bold d-block py-2 text-center" id="workoutTypeBadge">Mixed</span>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label urbanist-medium text-blue small mb-1 d-block">Total Exercises</label>
                            <span class="urbanist-bold text-blue fs-5 d-block py-2" id="totalExercisesCount">0</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Strength Exercises Section -->
        <section class="strength-exercises-section mb-4" id="strengthSection">
            <div class="card shadow-sm border-0 rounded-4">
                <div class="card-header bg-blue text-light-orange urbanist-bold">
                    <div class="d-flex justify-content-between align-items-center">
                        <span><i class="fas fa-dumbbell me-2"></i>Strength Exercises</span>
                        <button class="btn btn-sm btn-yellow" id="addStrengthExerciseBtn">
                            <i class="fas fa-plus me-2"></i>Add
                        </button>
                    </div>
                </div>
                <div class="card-body bg-light-orange">
                    <div class="table-responsive">
                        <table class="table align-middle mb-0" id="strengthExerciseTable">
                            <thead class="urbanist-bold text-blue small">
                                <tr>
                                    <th style="width: 25%;">Exercise</th>
                                    <th style="width: 20%;">Muscle Group</th>
                                    <th style="width: 15%;">Sets</th>
                                    <th style="width: 15%;">Reps</th>
                                    <th style="width: 20%;">Weight (lbs)</th>
                                    <th style="width: 5%;"></th>
                                </tr>
                            </thead>
                            <tbody id="strengthExerciseTableBody" class="urbanist-medium text-black">
                                <!-- Filled dynamically by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cardio Activities Section -->
        <section class="cardio-activities-section mb-4" id="cardioSection">
            <div class="card shadow-sm border-0 rounded-4">
                <div class="card-header bg-blue text-light-orange urbanist-bold">
                    <div class="d-flex justify-content-between align-items-center">
                        <span><i class="fas fa-running me-2"></i>Cardio Activities</span>
                        <button class="btn btn-sm btn-yellow" id="addCardioActivityBtn">
                            <i class="fas fa-plus me-2"></i>Add
                        </button>
                    </div>
                </div>
                <div class="card-body bg-light-orange">
                    <div class="table-responsive">
                        <table class="table align-middle mb-0" id="cardioTable">
                            <thead class="urbanist-bold text-blue small">
                                <tr>
                                    <th style="width: 40%;">Activity</th>
                                    <th style="width: 30%;">Duration (min)</th>
                                    <th style="width: 25%;">Distance (mi)</th>
                                    <th style="width: 5%;"></th>
                                </tr>
                            </thead>
                            <tbody id="cardioTableBody" class="urbanist-medium text-black">
                                <!-- Filled dynamically by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Save Changes Button -->
        <section class="save-section">
            <div class="card border-0 rounded-4 shadow-sm">
                <div class="card-body bg-light-orange">
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <p class="urbanist-medium text-black mb-1">
                                <i class="fas fa-info-circle text-blue me-2"></i>
                                Make changes inline and click Save to update
                            </p>
                            <p class="urbanist-medium text-muted small mb-0" id="lastSaved">
                                Last saved: Never
                            </p>
                        </div>
                        <button class="btn btn-blue" id="saveChangesBtn">
                            <i class="fas fa-save me-2"></i>Save Changes
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>
</div>

<!-- Delete Confirmation Modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content rounded-4 border-0">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title urbanist-bold" id="deleteModalLabel">
                    <i class="fas fa-exclamation-triangle me-2"></i>Delete Workout
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body bg-light-orange">
                <p class="urbanist-medium text-black mb-0">
                    Are you sure you want to delete this workout? This action cannot be undone.
                </p>
            </div>
            <div class="modal-footer bg-light-orange border-0">
                <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
                    <i class="fas fa-trash me-2"></i>Delete Workout
                </button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/workouts-details.js" asp-append-version="true" defer></script>
}

@section Styles {
    <link rel="stylesheet" href="~/css/workouts.css" asp-append-version="true" />
}
